<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Posts &middot; Moselog</title>

  <meta name="description" content="Various rants from Mose.">

  <meta name="generator" content="Hugo 0.15-DEV" />
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="mo5e" />
  <meta name="twitter:title" content="Posts &middot; Moselog">
  <meta name="twitter:description" content="Various rants from Mose.">

  <meta property="og:title" content="Posts &middot; Moselog">
  <meta property="og:type" content="blog">
  <meta property="og:description" content="Various rants from Mose.">
  
  <meta property="og:image" content="http://res.cloudinary.com/mosepix/image/upload/mose/mose.jpg"/>

  <link rel="shortcut icon" href="http://res.cloudinary.com/mosepix/image/upload/c_scale,w_32/mose/mose.jpg" type="image/jpeg">
  <link rel="apple-touch-icon" sizes="60x60" href="http://res.cloudinary.com/mosepix/image/upload/c_scale,w_60/mose/mose.jpg" type="image/jpeg">
  <link rel="apple-touch-icon" sizes="76x76" href="http://res.cloudinary.com/mosepix/image/upload/c_scale,w_76/mose/mose.jpg" type="image/jpeg">
  <link rel="apple-touch-icon" sizes="120x120" href="http://res.cloudinary.com/mosepix/image/upload/c_scale,w_120/mose/mose.jpg" type="image/jpeg">
  <link rel="apple-touch-icon" sizes="152x152" href="http://res.cloudinary.com/mosepix/image/upload/c_scale,w_152/mose/mose.jpg" type="image/jpeg">
  <link rel="icon" sizes="any" mask="" href="http://res.cloudinary.com/mosepix/image/upload/c_scale,w_60/mose/mose.jpg">
  

  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Oxygen:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css">
  <!--[if lte IE 8]>
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="http://blog.mose.com/css/all.min.css">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="alternate" type="application/rss+xml" title="Moselog" href="http://blog.mose.com/index.xml" />
</head>
<body>


<div id="layout" class="pure-g">
  <div class="sidebar pure-u-1 pure-u-md-1-4">
  <div class="header">
    <hgroup>
      <h1 class="brand-title"><a href="http://blog.mose.com">Moselog</a></h1>
      <h2 class="brand-tagline">Various rants from Mose.</h2>
    </hgroup>

    <nav class="nav">
      <ul class="nav-list">
        
        <li class="nav-item">
          <a class="pure-button" href="https://twitter.com/mo5e"><i class="fa fa-twitter"></i> Twitter</a>
        </li>
        
        
        <li class="nav-item">
          <a class="pure-button" href="https://github.com/mose "><i class="fa fa-github-alt"></i> github</a>
        </li>
        
        <li class="nav-item">
          <a class="pure-button" href="http://blog.mose.com/index.xml"><i class="fa fa-rss"></i> rss</a>
        </li>
      </ul>
    </nav>
  </div>
  
<div class="pagination">
  <nav role="pagination" class="post-list-pagination">
    
    <a href="http://blog.mose.com/post/page/4/" class="post-list-pagination-item button-small pure-button post-list-pagination-item-prev">
      <i class="fa fa-hand-o-left"></i>&nbsp;Newer
    </a>
    
    <span class="post-list-pagination-item post-list-pagination-item-current button-small pure-button">Page 5 of 6</span>
    
    <a href="http://blog.mose.com/post/page/6/" class="post-list-pagination-item button-small pure-button post-list-pagination-item-next">
      Older&nbsp;<i class="fa fa-hand-o-right"></i>
    </a>
    
  </nav>
</div>


</div>


  <div class="content pure-u-1 pure-u-md-3-4">
    <div>
      
      <div class="posts">
        
          <h1 class="content-subhead">
  2014-06-19
  <p class="post-meta">
    
    
      originaly posted on 
      <a class="post-origin" href="http://blog.mose.com/origin/faria-devtips">faria devtips</a>
    
    
      <a class="post-tags post-tags-console" href="http://blog.mose.com/tags/console">console</a>
    
    
  </p>
</h1>

          <section class="post">
            <header class="post-header">

              <a href="http://blog.mose.com/2014/06/19/less-first" class="post-title">Less first</a>
            </header>

            <div class="post-description">
              

<p>When working on a remote server, I use <code>less</code> instead of <code>tail</code> or <code>vi</code> to check files, the more I can.</p>

<h2 id="filter:3480f0a86761ef50d1ed36f6b3b46e94">filter</h2>

<ul>
<li>with <code>&amp;searchstring</code> it will hide all lines not matching searchstring, like a very simple grep from the console</li>
<li>just <code>&amp;</code> with nothing to get back to full view</li>
</ul>

<h2 id="edit-file:3480f0a86761ef50d1ed36f6b3b46e94">edit file</h2>

<ul>
<li>when in <code>less /etc/hosts</code> if I find out I need to edit it I just type <code>v</code> it opens it in vi</li>
<li>when you quit the editor you are back in less</li>
</ul>

<h2 id="follow-mode:3480f0a86761ef50d1ed36f6b3b46e94">follow mode</h2>

<ul>
<li>when in <code>less production.log</code>, if you want to follow incoming changes type <code>F</code> it will become like a <code>tail -f</code> but it keeps the syntax highlighting that was made with a <code>/</code> search - when in follow mode with <code>F</code> you can <code>ctrl-c</code> any time and examine the new stuff</li>
<li>note that if you are in filter mode the follow respects it (like if you did a <code>grep something/var/log/auth.log | grep 'Invalid user'</code>)</li>
</ul>

<h2 id="multifiles:3480f0a86761ef50d1ed36f6b3b46e94">multifiles</h2>

<ul>
<li>you can open several file and navigate like in vim with <code>:n</code> and <code>:p</code></li>
<li>when less is open you can open a new file with <code>:e</code></li>
</ul>

<h2 id="call-options-inside-less:3480f0a86761ef50d1ed36f6b3b46e94">call options inside less</h2>

<ul>
<li>you can call any launch option from inside less, one I use often is <code>-S</code> that will enable/disable wrapping of long lines, very useful when parsing web server log files</li>
<li>to disable/enable search highlighting just <code>-G</code></li>
<li>any other launch option can be called from inside less, pretty convenient</li>
</ul>

            </div>
          </section>
        
          <h1 class="content-subhead">
  2014-06-12
  <p class="post-meta">
    
    
      originaly posted on 
      <a class="post-origin" href="http://blog.mose.com/origin/faria-devtips">faria devtips</a>
    
    
      <a class="post-tags post-tags-ruby" href="http://blog.mose.com/tags/ruby">ruby</a><a class="post-tags post-tags-s3" href="http://blog.mose.com/tags/s3">s3</a>
    
    
  </p>
</h1>

          <section class="post">
            <header class="post-header">

              <a href="http://blog.mose.com/2014/06/12/s3-backups" class="post-title">S3 backups</a>
            </header>

            <div class="post-description">
              <p>We use S3 to backup various kind of files on MB. We use the very convenient backup gem for that (we still use 3.9.0).</p>

<ul>
<li><a href="http://meskyanichi.github.io/backup/v4/">http://meskyanichi.github.io/backup/v4/</a></li>
</ul>

<p>But at some point it appeared that backing up our audio recording was hammering disk IO on our server, because the syncer is calculating md5 footprint for each file each time a backup happens. When you get thousands of big files that is pretty expensive process (in our case 20k files and 50G total).</p>

<p>So I added a small trick there:</p>

<p>in <code>Backup/models/backup_audio.rb</code></p>

<pre><code class="language-ruby">module Backup::Syncer::Cloud
  class Base &lt; Syncer::Base
    def process_orphans
      if @orphans.is_a?(Queue)
        @orphans = @orphans.size.times.map { @orphans.shift }
      end
      &quot;Older Files: #{ @orphans.count }&quot;
    end
  end
end

Backup::Model.new(:backup_audio, 'Audio files Backup to S3') do

  before do
    system(&quot;/Backup/latest_audio.sh&quot;)
  end

  after do
    FileUtils.rm_rf(&quot;/tmp/streams&quot;)
  end

  ##
  # Amazon Simple Storage Service [Syncer]
  #
  sync_with Cloud::S3 do |s3|
    s3.access_key_id     = &quot;xxx&quot;
    s3.secret_access_key = &quot;xxx&quot;
    s3.bucket            = &quot;bucket_backup&quot;
    s3.region            = &quot;us-east-1&quot;
    s3.path              = &quot;/mb_audio_backup&quot;
    s3.mirror            = false
    s3.thread_count      = 50

    s3.directories do |directory|
      directory.add &quot;/tmp/streams&quot;
    end
  end
end
</code></pre>

<p>and in <code>Backup/latest_audio.sh</code></p>

<pre><code class="language-bash">#!/bin/sh
# isolate files changed in the last 3 days

TMPDIR=/tmp/streams

mkdir $TMPDIR
for i in `find /storage/audio/ -type f -cmin -4320`; do
  ln -s $i $TMPDIR
done
</code></pre>

<p>It creates a fake backup dir with links to the files that actually changed in the last 3 days and patches the syncer to avoid flooding the logs with orphan files. When sometimes S3 upload fails on one file (and it happens from time to time for &lsquo;amazonian&rsquo; reason) it will be caught on the next daily backup.</p>

<p>The result was pretty obvious on our disk usage with our daily backups:</p>

<img src="http://res.cloudinary.com/mosepix/image/upload/devtips/2014-06-12-s3backup.png" alt="graph" class="pure-img" />



<p>in the logs:</p>

<pre><code>[2014/06/10 07:00:25][info] Summary:
[2014/06/10 07:00:25][info]   Transferred Files: 5
[2014/06/10 07:00:25][info]   Older Files: 22371
[2014/06/10 07:00:25][info]   Unchanged Files: 16
[2014/06/10 07:00:25][info] Syncer::Cloud::S3 Finished!
[2014/06/10 07:00:25][info] Backup for 'Audio files Backup to S3 (backup_audio)' Completed Successfully in 00:00:22
[2014/06/10 07:00:25][info] After Hook Starting...
[2014/06/10 07:00:25][info] After Hook Finished.
</code></pre>

            </div>
          </section>
        
          <h1 class="content-subhead">
  2014-06-04
  <p class="post-meta">
    
    
      originaly posted on 
      <a class="post-origin" href="http://blog.mose.com/origin/faria-devtips">faria devtips</a>
    
    
      <a class="post-tags post-tags-ruby" href="http://blog.mose.com/tags/ruby">ruby</a><a class="post-tags post-tags-rubygems" href="http://blog.mose.com/tags/rubygems">rubygems</a>
    
    
  </p>
</h1>

          <section class="post">
            <header class="post-header">

              <a href="http://blog.mose.com/2014/06/04/make-a-gem" class="post-title">Make a gem</a>
            </header>

            <div class="post-description">
              

<p>Making and publishing your own gems is so incredibly simple. Here is my setp by step process when I want to publish one:</p>

<h2 id="make-a-rubygems-account:a6c8c79e924ce88903bef7ff7392e41e">Make a Rubygems account</h2>

<ul>
<li>first ensure create an ccount on <a href="https://rubygems.org/">https://rubygems.org/</a></li>
<li>initialize your credentials:</li>
</ul>

<pre><code>curl -u username https://rubygems.org/api/v1/api_key.yaml &gt; ~/.gem/credentials
Enter host password for user 'username':

chmod 0600 ~/.gem/credentials
</code></pre>

<h2 id="prepare-the-code:a6c8c79e924ce88903bef7ff7392e41e">Prepare the code</h2>

<p>These steps are my typical path, nothing is really mandatory there.</p>

<ul>
<li>create a repo at github (or wherever you want)</li>
<li>create a base gem skeleton <code>bundle gem mycoolgem</code></li>
<li>update the README.md, add some minimal information. The clearest you explain what it does the best chances people will adopt it. Add cypirght information</li>
<li>create a CHANGELOG.md because when you publish something you need a clear log of your version changes</li>
<li>enable the tracking on <a href="https://codeclimate.com/">codeclimate</a>, <a href="https://travis-ci.org/">travis</a>, <a href="https://coveralls.io/">coveralls</a>, <a href="https://gemnasium.com">gemnasium</a></li>
<li>add badges from <a href="http://shields.io">http://shields.io</a> in the README.md because it helps to qualify the state of the code quickly</li>
<li>when the gem code don&rsquo;t need to have access to the version number, I found convenient to just remove the version file and add version in the .gemspec from the changelog file with <code>spec.version  = File.read(File.expand_path('../CHANGELOG.md', __FILE__))[/([0-9]+\.[0-9]+\.[0-9]+)/]</code>
(so then when I version bump there is only one file to edit)</li>
<li>write the code (or copy it from the private app you extract it from)</li>
<li>add a spec/ or test/ dir and write some tests and try to reach a decent coverage</li>
</ul>

<h2 id="release-it:a6c8c79e924ce88903bef7ff7392e41e">Release it</h2>

<ul>
<li>add the date in the changelog for the current version</li>
<li><code>rake release</code></li>
<li>bump the version to the next increment in the changelog (and version file if any)</li>
</ul>

<p>Overall with the initial bundle command and the final rake task for release, it&rsquo;s pretty straightforward.</p>

<p>Also check <a href="http://guides.rubygems.org/make-your-own-gem/">http://guides.rubygems.org/make-your-own-gem/</a></p>

            </div>
          </section>
        
          <h1 class="content-subhead">
  2014-05-27
  <p class="post-meta">
    
    
      originaly posted on 
      <a class="post-origin" href="http://blog.mose.com/origin/faria-devtips">faria devtips</a>
    
    
      <a class="post-tags post-tags-ruby" href="http://blog.mose.com/tags/ruby">ruby</a><a class="post-tags post-tags-rubygems" href="http://blog.mose.com/tags/rubygems">rubygems</a>
    
    
  </p>
</h1>

          <section class="post">
            <header class="post-header">

              <a href="http://blog.mose.com/2014/05/27/gem-reverse-dependencies" class="post-title">Gem reverse dependencies</a>
            </header>

            <div class="post-description">
              <p>I have been looking for a way to see what gem uses a gem, so I can see examples of integration in other projects. The rubygems API guide don&rsquo;t tell anything about such reverse dependency query. But it is actually there, it got merged some time ago, and optimized, but it is not documented yet (it runs really fast, kudos Rubygems guys).</p>

<pre><code class="language-ruby">ruby -ropen-uri -rpp -ryaml \
     -e 'pp YAML.load(open(&quot;https://rubygems.org/api/v1/gems/rails_best_practices/reverse_dependencies.yaml&quot;))'

[&quot;metric_fu&quot;,
 &quot;flyerhzm-metric_fu&quot;,
 &quot;edouard-metric_fu&quot;,
 &quot;devver-metric_fu&quot;,
 &quot;goldstar-metric_fu&quot;,
 &quot;socializer&quot;,
 &quot;trollface&quot;,
 &quot;guard-rails_best_practices&quot;,
 &quot;rferraz-metric_fu&quot;,
 &quot;git-hooks-helper&quot;,
 &quot;odor&quot;,
 &quot;rake_check&quot;,
 &quot;koality&quot;,
 &quot;danmayer-metric_fu&quot;,
 &quot;bf4-metric_fu&quot;,
 &quot;metrics_satellite&quot;,
 &quot;code_hunter&quot;,
 &quot;kinit&quot;,
 &quot;rails-audit&quot;,
 &quot;pronto-rails_best_practices&quot;,
 &quot;free_disk_space&quot;,
 &quot;warder&quot;,
 &quot;ruby_osx_app&quot;,
 &quot;sanelint&quot;]
</code></pre>

<p>Out of curiosity I counted some wellknown gems usages by adding a <code>.count</code> at the end:</p>

<pre><code>rake:    23766
rails:   6283
thor:    2786
pry:     2870
sinatra: 1964
devise:  422 
</code></pre>

            </div>
          </section>
        
          <h1 class="content-subhead">
  2014-05-22
  <p class="post-meta">
    
    
      originaly posted on 
      <a class="post-origin" href="http://blog.mose.com/origin/faria-devtips">faria devtips</a>
    
    
      <a class="post-tags post-tags-ruby" href="http://blog.mose.com/tags/ruby">ruby</a><a class="post-tags post-tags-console" href="http://blog.mose.com/tags/console">console</a>
    
    
  </p>
</h1>

          <section class="post">
            <header class="post-header">

              <a href="http://blog.mose.com/2014/05/22/hackpad-cli" class="post-title">Hackpad cli</a>
            </header>

            <div class="post-description">
              <p>In Faria we use hackpad a lot, it&rsquo;s pretty useful. Mose made a command line interface so he can download all the pads locally and grep them all in one go. It also transforms the markdown much better than the original hackpad markdown export, which totally sucks (as for now). So pads can be recycled easily in github wiki pages.</p>

<ul>
<li><a href="https://github.com/mose/hackpad-cli">https://github.com/mose/hackpad-cli</a></li>
</ul>

            </div>
          </section>
        
          <h1 class="content-subhead">
  2014-05-15
  <p class="post-meta">
    
    
      originaly posted on 
      <a class="post-origin" href="http://blog.mose.com/origin/faria-devtips">faria devtips</a>
    
    
      <a class="post-tags post-tags-vim" href="http://blog.mose.com/tags/vim">vim</a>
    
    
  </p>
</h1>

          <section class="post">
            <header class="post-header">

              <a href="http://blog.mose.com/2014/05/15/eddie-vim-and-rcfiles" class="post-title">Eddie Vim and rcfiles</a>
            </header>

            <div class="post-description">
              <p>Mose sometimes uses vim on the side of ST3, and can&rsquo;t do it without the pretty good eddie kao set of config files.</p>

<p>Check it out at <a href="https://github.com/kaochenlong/eddie-vim">https://github.com/kaochenlong/eddie-vim</a> it&rsquo;s tailored for rails dev. I gathered it (plus my oh-my-zsh setup) in my github rcfiles repo <a href="https://github.com/mose/rcfiles">https://github.com/mose/rcfiles</a> with an installer that I runs when I install a new server.</p>

            </div>
          </section>
        
          <h1 class="content-subhead">
  2014-05-08
  <p class="post-meta">
    
    
      originaly posted on 
      <a class="post-origin" href="http://blog.mose.com/origin/faria-devtips">faria devtips</a>
    
    
      <a class="post-tags post-tags-sublimetext" href="http://blog.mose.com/tags/sublimetext">sublimetext</a>
    
    
  </p>
</h1>

          <section class="post">
            <header class="post-header">

              <a href="http://blog.mose.com/2014/05/08/dictionnary-in-sublimetext" class="post-title">Dictionnary in sublimetext</a>
            </header>

            <div class="post-description">
              <p>I recently have been annoyed by his own typoes and has been looking for a way to fix it. This is actually pretty simple to <code>cmd-shift-p</code> and install a package called <code>Dictionnaries</code>. Then by hitting <code>F6</code> you switch on and off the spellcheck highlighting. When you write a lot of documentation that is very helpful (and you want to write a lot of documentation, don&rsquo;t you ?).</p>

<p>The spellcheck auto-highlight can be enabled for specific file extensions (like .md files) by adding</p>

<pre><code>&quot;spell_check&quot;: true
</code></pre>

<p>in <code>preferences &gt; Settings - more &gt; Syntax specific - user</code> (while having a markdown page open)</p>

            </div>
          </section>
        
          <h1 class="content-subhead">
  2014-05-01
  <p class="post-meta">
    
    
      originaly posted on 
      <a class="post-origin" href="http://blog.mose.com/origin/faria-devtips">faria devtips</a>
    
    
      <a class="post-tags post-tags-console" href="http://blog.mose.com/tags/console">console</a><a class="post-tags post-tags-ssh" href="http://blog.mose.com/tags/ssh">ssh</a>
    
    
  </p>
</h1>

          <section class="post">
            <header class="post-header">

              <a href="http://blog.mose.com/2014/05/01/ssh-to-socket" class="post-title">SSH to socket</a>
            </header>

            <div class="post-description">
              <p>I use a special trick because he&rsquo;s often ssh&rsquo;ing all over the place. Add in your <code>.ssh/config</code></p>

<pre><code>Host *
  ControlMaster auto
  ControlPath /tmp/%r@%h:%p
</code></pre>

<p>It will save your first connection to a host as a socket in <code>/tmp</code> and then all subsequent ssh connections to the same host are open instantly because there is no key renegotiation  on the way. The side effect is that the child-connections cannot be closed until the first one closes, but I find it convenient because it tells me that I still have a console open  on the server that I should close.</p>

            </div>
          </section>
        
          <h1 class="content-subhead">
  2013-04-07
  <p class="post-meta">
    
    
      originaly posted on 
      <a class="post-origin" href="http://blog.mose.com/origin/old-tumblr-site">old tumblr site</a>
    
    
      <a class="post-tags post-tags-greenruby" href="http://blog.mose.com/tags/greenruby">greenruby</a>
    
    
  </p>
</h1>

          <section class="post">
            <header class="post-header">

              <a href="http://blog.mose.com/2013/04/07/about-green-ruby" class="post-title">About Green Ruby</a>
            </header>

            <div class="post-description">
              

<p><a href="http://greenruby.org/">Green Ruby</a> is a weekly newsletter that I’m publishing about ruby, rails, javascript and web development in general. I am preparing a website to make it more collective and here is the ‘about’ page, not yet published, but I was thinking it could be interesting to share it before the website is all ready.</p>

<h2 id="genesis:1c34dfda6e65228c3dbbf6fb2d30812e">Genesis</h2>

<p>The Newsletter began in june 2012 from the habit I had to send weekly newsletter in <a href="http://codegreenit.com/">Codegreen</a> for our team to know what is happening in our company,. That was purely a teamwork tool for general transparency. But with time passing I also included there some links to what I was finding around that would be of interest for my geek colleagues.</p>

<p>That CodeGreen Internal newsletter began to be cluttered with various links at the bottom of it. So I decided to separate that links gathering bunch in another newsletter. But then it could also be useful for my friends, out of the scope of our team.</p>

<h2 id="green-birth:1c34dfda6e65228c3dbbf6fb2d30812e">Green Birth</h2>

<p>At that time I had to test <a href="http://mailchimp.com/">Mailchimp</a> service for one of our projects, so because they offer a free package when volume is not too big, I thought I should just create that newsletter as a public freely available publication.</p>

<p>So in february 2013 I sent the first Green Ruby Newsletter to 3 subscribers. Well, mostly our team :) Then it became a weekly habit, so I got a domain name for it, and organically it’s growing slowly.</p>

<h2 id="the-redactor-gear:1c34dfda6e65228c3dbbf6fb2d30812e">The redactor gear</h2>

<p>Codegreen paid for my <a href="http://newsblur.com/">Newsblur</a> account so I can follow a bunch of feeds. Google reader was my first tool but well, they are closing, and actually Newsblur is much better. It’s open source and the guy that makes it does a great job (too bad it’s in python and not in ruby).</p>

<p>I’m also loading a bunch of podcasts on my phone and after having tried a lot of podcast softwares I’m really happy with <a href="http://www.podkicker.com/">Podkicker</a>, it’s just very convenient and it has all I need with the free version. So in my 40 minutes commuting to go to work, I just get the ears busy. I tried to use <a href="https://gpodder.net/user/mose">Gpodder</a> but it’s not totally perfect and the support in podcast clients is not as good as it should be. So I don’t stick on it, maybe it will evolve and I will get back to it.</p>

<p>But I also get a lot of news by just wandering around on <a href="https://geekli.st/">Geekli.st</a>, on <a href="https://coderbits.com/">Coderbits</a>, hacker news, and I subscribed to a bunch of various newsletters. I also watch teh new gems feeds from <a href="https://twitter.com/RubyGemsAlt">@rubygems-alt</a> and I retweet stuff of interest on <a href="https://twitter.com/cogtw">@cogtw</a> account (those 2 are my alternate twitter identities).</p>

<p>Each week <a href="https://github.com/tubaxenor">William</a> (aka xenor) also sends me a list of links. But I definitely don’t use any facebook feeds. For some reason, this is a place I avoid the most I can.</p>

<h2 id="what-next:1c34dfda6e65228c3dbbf6fb2d30812e">What next ?</h2>

<p>My ambition there is to keep it non-commercial, and change it to be more community driven. The preparation of the letter is eating a big part of my saturdays for the last 13 weeks and I don’t think I can keep up the same pace for long time.</p>

<p>The idea I have about the community driven thing is by engineering some automation on the news gathering (to replace newsblur), have a place where the news can be triaged by various people, a little bit like it is on <a href="https://news.ycombinator.com/">Hacker News</a> with a vote system. But the gathering won’t limit to blog posts and rss feeds, there would also be podcasts and video feeds. There is now a lot of possibilities in automation on feeds aggregation. I worked on a project that already does that feeds aggregation, named “the Blux”. And I expect to replicate parts of it for my Green Ruby Engine.</p>

<p>But also, as usual, this project is also an occasion to play with recent technologies or stuff I want to know more about, otherwise where is the fun ? So here comes <a href="http://emberjs.com/">Ember.js</a>, on the top of <a href="http://www.sinatrarb.com/">Sinatra</a> with <a href="http://www.mongodb.org/">mongoDB</a>, and there will be much more on the road (thinking about trying <a href="http://af83.github.io/sponges/">Sponges</a> too).</p>

            </div>
          </section>
        
          <h1 class="content-subhead">
  2013-03-22
  <p class="post-meta">
    
    
      originaly posted on 
      <a class="post-origin" href="http://blog.mose.com/origin/old-tumblr-site">old tumblr site</a>
    
    
      <a class="post-tags post-tags-bbb" href="http://blog.mose.com/tags/bbb">bbb</a>
    
    
  </p>
</h1>

          <section class="post">
            <header class="post-header">

              <a href="http://blog.mose.com/2013/03/22/install-bigbluebutton-in-a-vm-on-ubuntu-1204" class="post-title">Install BigBlueButton in a VM on Ubuntu 1204</a>
            </header>

            <div class="post-description">
              

<p><a href="http://bigbluebutton.org/">BigBlueButton</a> is an amazing piece of free software, designed for virtual classrooms but can also be used for webinars, conferences, technical support and other uses. It gathers in the same place a video-conference system, with a shared PDF on which the presenter can doodle, an SIP bridge that make people can join using a phone, and a deskshare java applet for showing others pieces of your screen. Pretty neat. It’s around since 2007 and I had occasion to play with it with the Tikiwiki community.</p>

<p>And now I need to install one at <a href="http://codegreenit.com/">Codegreen</a> for our customer support and maybe some other uses. Great. I go for the last version 0.80 and it only works on ubuntu 10.04 (there are 25 different free software projects embedded in the beast, quite hard to maintain all on many versions, so they stick to the old one for now it seems).</p>

<p>So I get a new server just for that, and I try the install of the old 10.04 image. But it fails miserably for some new SATA drivers reasons, despite the more recent 12.04 works fine, the 10.04 just can’t see the hard drive. Bummer. After some fight then I need to use the alternative install method, using the <a href="http://code.google.com/p/bigbluebutton/wiki/BigBlueButtonVM">VM image</a> that BBB provides for VMWare.</p>

<h2 id="install-the-bbb-vm:84bb7b31097e7dff868fbef479daafb5">Install the BBB VM</h2>

<p>I don’t really like VMWare but I go get the free player and install it. The VMWare server that I wanted is discontinued they now only offer the VMWare player which requires a GUI install. Very lame, but ok. I get the VMWare Player image from their site and I install it without problem (the .bundle that I download needs to be executed after a chmod +x). Then I get the BBB VM 0.80 and launch it in the VMWare Player and tadaaa, it just works out of the box, magic.</p>

<p>Note that I installed it under my own account, no need for root with that thing.</p>

<h2 id="setup-the-startup-launch:84bb7b31097e7dff868fbef479daafb5">Setup the startup launch</h2>

<p>Because the Player is a GUI application, I looked around and found the way to launch it from commandline using the VIX (that is downloadable on the same page as the player and installable the same way). Then I can use vmrun to control the player, feels much better. I add in the /etc/rc.local of the host:</p>

<pre><code>sudo -u mose /usr/bin/vmrun -T player start /home/mose/vmware/bigbluebutton-vm/bigbluebutton-vm.vmx nogui
</code></pre>

<h2 id="handling-the-routing:84bb7b31097e7dff868fbef479daafb5">Handling the routing</h2>

<p>Here is the tricky part. The Player has 3 ways to handle th routing of the VM (which is very poor compared to the options provided by VirtualBox). and the bridge method was not working for me, because I have a static IP for the server on one card, a dhcp address on internal network on a second card, and the bridge option in VMWare don’t let you specify which interface is going to be bridged.</p>

<p>BBB says that you should use bridge, so the VM has its own IP and is like a first class member of your network, but it seemed that the NAT option was possible as far as you redirect some ports. So I’m going that way.</p>

<p>So I setup the NAT option for the VM, in the VM I fix the ip to 192.168.96.6 (that on the host I aliased to vm-bbb in /etc/hosts), and I add the subdomain I plan to use in the /etc/hosts of the VM (that way the VM bypass the DNS search and assumes that his own natted IP is matching the subdomain reachable from outside). Note that this etc-hosts trick will spit some errors at next step that needs to be run on the VM:</p>

<pre><code>bbb-conf --setip bbb.mydomain.com
</code></pre>

<p>Then I need to redirect some ports, like the 22 for ssh access, the 80 for access to the main application, and some others that I have no clue what they are useful for (but I got it from some blog posts). So I install rinetd and add to /etc/rinetd.conf:</p>

<pre><code>0.0.0.0 2222 vm-bbb 22
0.0.0.0 80   vm-bbb 80
0.0.0.0 1935 vm-bbb 1935
0.0.0.0 9123 vm-bbb 9123
</code></pre>

<p>and all is good. It seems to work fine, and I probably will have to test it more, but besides the sysadmin setup, the install of BBB was pretty straightforward. Great job !</p>

<h2 id="links:84bb7b31097e7dff868fbef479daafb5">Links</h2>

<ul>
<li>Get VMWare player and VIX : <a href="https://my.vmware.com/web/vmware/free#desktop_end_user_computing/vmware_player/5_0">https://my.vmware.com/web/vmware/free#desktop_end_user_computing/vmware_player/5_0</a></li>
<li>BBB website : <a href="http://bigbluebutton.org">http://bigbluebutton.org</a></li>
<li>BBB VM instructions : <a href="http://code.google.com/p/bigbluebutton/wiki/BigBlueButtonVM">http://code.google.com/p/bigbluebutton/wiki/BigBlueButtonVM</a></li>
<li>BBB VM Download : <a href="http://sourceforge.net/projects/bigbluebutton/files/">http://sourceforge.net/projects/bigbluebutton/files/</a></li>
</ul>

            </div>
          </section>
        
      </div>
      
<div class="pagination">
  <nav role="pagination" class="post-list-pagination">
    
    <a href="http://blog.mose.com/post/page/4/" class="post-list-pagination-item button-small pure-button post-list-pagination-item-prev">
      <i class="fa fa-hand-o-left"></i>&nbsp;Newer
    </a>
    
    <span class="post-list-pagination-item post-list-pagination-item-current button-small pure-button">Page 5 of 6</span>
    
    <a href="http://blog.mose.com/post/page/6/" class="post-list-pagination-item button-small pure-button post-list-pagination-item-next">
      Older&nbsp;<i class="fa fa-hand-o-right"></i>
    </a>
    
  </nav>
</div>


      <div class="footer">
  <div class="pure-menu pure-menu-horizontal pure-menu-open">
    <ul>
      <li>Powered by <a class="hugo" href="http://hugo.spf13.com/" target="_blank">hugo</a></li>
    </ul>
  </div>
</div>
<script src="http://blog.mose.com/js/all.min.js"></script>

    </div>
  </div>
</div>

</body>
</html>
